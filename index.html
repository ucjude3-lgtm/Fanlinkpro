<script type="module">
  // Firebase SDKs
  import { initializeApp } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-app.js";
  import {
    getAuth,
    signInWithEmailAndPassword,
    onAuthStateChanged,
    signOut
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-auth.js";
  import {
    getFirestore,
    doc,
    getDoc
  } from "https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore.js";

  // ðŸ”¥ YOUR FIREBASE CONFIG
  const firebaseConfig = {
    apiKey: "AIzaSyA6YYx6PPtpxBoRddf",
    authDomain: "fanlinkpro-c5ca8.firebaseapp.com",
    projectId: "fanlinkpro-c5ca8",
    storageBucket: "fanlinkpro-c5ca8.appspot.com",
    messagingSenderId: "890254329454",
    appId: "1:890254329454:web:d1f217",
    measurementId: "G-L1BH3QGVL1"
  };

  // Initialize Firebase
  const app = initializeApp(firebaseConfig);
  const auth = getAuth(app);
  const db = getFirestore(app);

  // ðŸ” LOGIN FUNCTION (call this from your login form)
  window.loginUser = async function(email, password) {
    try {
      const userCred = await signInWithEmailAndPassword(auth, email, password);
      const uid = userCred.user.uid;

      // Check admin role
      const adminRef = doc(db, "admins", uid);
      const adminSnap = await getDoc(adminRef);

      if (adminSnap.exists()) {
        // âœ… Admin
        window.location.href = "/admin.html";
      } else {
        // ðŸ‘¤ Normal user
        window.location.href = "/dashboard.html";
      }
    } catch (err) {
      alert(err.message);
    }
  };

  // ðŸ”“ LOGOUT
  window.logoutUser = async function() {
    await signOut(auth);
    window.location.href = "/login.html";
  };

  // ðŸ” Protect admin page
  window.checkAdmin = function() {
    onAuthStateChanged(auth, async (user) => {
      if (!user) {
        window.location.href = "/login.html";
        return;
      }

      const adminRef = doc(db, "admins", user.uid);
      const adminSnap = await getDoc(adminRef);

      if (!adminSnap.exists()) {
        window.location.href = "/dashboard.html";
      }
    });
  };
        </script>
